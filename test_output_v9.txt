
> @srsergio/taptapp-ar@1.0.91 test D:\Project\TapTapp\taptapp-ar
> vitest "--run"


[1m[46m RUN [49m[22m [36mv4.0.16 [39m[90mD:/Project/TapTapp/taptapp-ar[39m

[90mstdout[2m | tests/performance.test.js[2m > [22m[2mCompiler Performance Benchmark[2m > [22m[2mshould compile multiple images in parallel and measure performance
[22m[39mðŸš€ Starting Multi-Image Performance Benchmark...
âš¡ OfflineCompiler: Main thread mode (no workers)
ðŸ“¸ Loading test image: D:\Project\TapTapp\taptapp-ar\tests\assets\test-image.png

[90mstdout[2m | tests/compiler.test.js[2m > [22m[2mOfflineCompiler[2m > [22m[2mshould compile an image for tracking
[22m[39mðŸš€ Starting OfflineCompiler test with Jimp...
âš¡ OfflineCompiler: Main thread mode (no workers)
ðŸ“¸ Loading image with Jimp: D:\Project\TapTapp\taptapp-ar\tests\assets\test-image.png

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould compile the test image to a .taar buffer
[22m[39mðŸ“¦ Compiling test image to buffer...
âš¡ OfflineCompiler: Main thread mode (no workers)

[90mstdout[2m | tests/generate.test.js[2m > [22m[2mGenerator[2m > [22m[2mshould generate a .taar file in assets
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)
ðŸ“¸ Loading image: D:\Project\TapTapp\taptapp-ar\tests\assets\test-image.png


Compilation progress: 50.00%
Compilation progress: 100.00%[90mstdout[2m | tests/compiler.test.js[2m > [22m[2mOfflineCompiler[2m > [22m[2mshould compile an image for tracking
[22m[39mðŸ–¼ï¸ Loaded image: 1024x1024
ðŸ§ª Running compileTrack...

[90mstdout[2m | tests/compiler.test.js[2m > [22m[2mOfflineCompiler[2m > [22m[2mshould compile an image for tracking
[22m[39m
âœ… Compilation finished in 0.29s
ðŸ“ˆ Extracted 2 feature levels/sets
ðŸ“ Found 60 points in the first level

 [32mâœ“[39m tests/compiler.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 952[2mms[22m[39m
     [33m[2mâœ“[22m[39m should compile an image for tracking [33m 949[2mms[22m[39m
[90mstdout[2m | tests/accuracy-lsh.test.js[2m > [22m[2mLSH Binarizer Accuracy[2m > [22m[2mshould maintain relative distance (LSH property)
[22m[39mLSH 128 Hamming Dist (Similar): 0
LSH 128 Hamming Dist (Different): 64

 [32mâœ“[39m tests/accuracy-lsh.test.js [2m([22m[2m3 tests[22m[2m)[22m[32m 9[2mms[22m[39m

Total Progress: 5.00%
Progress: 5.00%
Total Progress: 10.00%
Progress: 10.00%
Total Progress: 15.00%
Progress: 15.00%
Progress: 20.00%
Total Progress: 20.00%
Progress: 25.00%
Total Progress: 25.00%[90mstdout[2m | tests/e2e-detection.test.js[2m > [22m[2mEnd-to-End Detection (Protocol V9 - HDC)[2m > [22m[2mshould compile an image, export/import it, and detect it with high confidence (HDC)
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)
ðŸ”¨ Compiling target...

[90mstdout[2m | tests/matcher.test.js[2m > [22m[2mMatcher with Columnar Data[2m > [22m[2mshould match features using Matcher class
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)


Progress: 30.00%
Total Progress: 30.00%[90mstdout[2m | tests/viewer.test.js[2m > [22m[2mAR Viewer (Controller)[2m > [22m[2mshould match a FULL target image (no crop)
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)


Progress: 35.00%[90mstdout[2m | tests/e2e-detection.test.js[2m > [22m[2mEnd-to-End Detection (Protocol V9 - HDC)[2m > [22m[2mshould compile an image, export/import it, and detect it with high confidence (HDC)
[22m[39mâ±ï¸ CompilaciÃ³n total: 6.476s


Progress: 40.00%[90mstdout[2m | tests/matcher.test.js[2m > [22m[2mMatcher with Columnar Data[2m > [22m[2mshould match features using Matcher class
[22m[39mâ±ï¸ CompilaciÃ³n total: 6.456s


Progress: 45.00%
Progress: 50.00%[90mstdout[2m | tests/generate.test.js[2m > [22m[2mGenerator[2m > [22m[2mshould generate a .taar file in assets
[22m[39mðŸ§ª Compiling...


Total Progress: 35.00%
Total Progress: 40.00%
Total Progress: 45.00%
Total Progress: 50.00%[90mstdout[2m | tests/performance.test.js[2m > [22m[2mCompiler Performance Benchmark[2m > [22m[2mshould compile multiple images in parallel and measure performance
[22m[39mðŸ§ª Compiling 1 image...

[90mstdout[2m | tests/viewer.test.js[2m > [22m[2mAR Viewer (Controller)[2m > [22m[2mshould match a FULL target image (no crop)
[22m[39mâ±ï¸ CompilaciÃ³n total: 6.399s

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould compile the test image to a .taar buffer
[22m[39mâ±ï¸ CompilaciÃ³n total: 6.371s


Progress: 75.00%[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould compile the test image to a .taar buffer
[22m[39mâœ… Buffer created: 728688 bytes

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mOfflineCompiler should import data from exported buffer
[22m[39mðŸ“¦ Testing export/import cycle...
âš¡ OfflineCompiler: Main thread mode (no workers)


Total Progress: 75.00%
Progress: 100.00%[90mstdout[2m | tests/generate.test.js[2m > [22m[2mGenerator[2m > [22m[2mshould generate a .taar file in assets
[22m[39mâ±ï¸ CompilaciÃ³n total: 6.517s


Total Progress: 100.00%[90mstdout[2m | tests/performance.test.js[2m > [22m[2mCompiler Performance Benchmark[2m > [22m[2mshould compile multiple images in parallel and measure performance
[22m[39mâ±ï¸ CompilaciÃ³n total: 6.633s

[90mstdout[2m | tests/generate.test.js[2m > [22m[2mGenerator[2m > [22m[2mshould generate a .taar file in assets
[22m[39m
âœ… Saved to: D:\Project\TapTapp\taptapp-ar\tests\assets\targets.taar (711.61 KB)

 [32mâœ“[39m tests/generate.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 7247[2mms[22m[39m
     [33m[2mâœ“[22m[39m should generate a .taar file in assets [33m 7242[2mms[22m[39m
[90mstdout[2m | tests/performance.test.js[2m > [22m[2mCompiler Performance Benchmark[2m > [22m[2mshould compile multiple images in parallel and measure performance
[22m[39m

ðŸ Benchmark Results:
â±ï¸ Total Duration: 6.63s
ðŸ“¦ Exported Size: 0.69 MB (711.61 KB)

âœ… Image 1 Summary:
   - Tracking points: 60
   - Matching Layers (Keyframes):
     Layer 0: Scale=1.0000, Dim=1024x1024, Points=9000 (Max:4986, Min:4014)
     Layer 1: Scale=0.8706, Dim=891x891, Points=9000 (Max:4013, Min:4987)
     Layer 2: Scale=0.5743, Dim=588x588, Points=9000 (Max:3677, Min:5323)
     Layer 3: Scale=0.3789, Dim=388x388, Points=6980 (Max:3257, Min:3723)
     Layer 4: Scale=0.2500, Dim=256x256, Points=3368 (Max:1511, Min:1857)
     Layer 5: Scale=0.1649, Dim=169x169, Points=1634 (Max:727, Min:907)
     Layer 6: Scale=0.1088, Dim=111x111, Points=771 (Max:328, Min:443)
     Layer 7: Scale=0.0718, Dim=74x74, Points=341 (Max:133, Min:208)
     Layer 8: Scale=0.0474, Dim=49x49, Points=138 (Max:46, Min:92)
     Layer 9: Scale=0.0313, Dim=32x32, Points=66 (Max:23, Min:43)

ðŸ” Verifying compiled data with Controller...

[90mstdout[2m | tests/matcher.test.js[2m > [22m[2mMatcher with Columnar Data[2m > [22m[2mshould match features using Matcher class
[22m[39mMATCH_DL: Hamming found 179 initial matches
Matched keyframe: [33m0[39m
Inliers: [33m739[39m

 [32mâœ“[39m tests/matcher.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 8275[2mms[22m[39m
     [33m[2mâœ“[22m[39m should match features using Matcher class [33m 8270[2mms[22m[39m
[90mstdout[2m | tests/performance.test.js[2m > [22m[2mCompiler Performance Benchmark[2m > [22m[2mshould compile multiple images in parallel and measure performance
[22m[39m   - Detected 5400 features in validation pass.

[90mstdout[2m | tests/e2e-detection.test.js[2m > [22m[2mEnd-to-End Detection (Protocol V9 - HDC)[2m > [22m[2mshould compile an image, export/import it, and detect it with high confidence (HDC)
[22m[39mðŸ“‚ Exporting and importing .taar data...
ðŸ” Detecting features in query image...
ðŸŽ¯ Matching query features against imported target...
MATCH_DL: Hamming found 151 initial matches
âœ… Result: KeyframeIndex=0, Inliers=601

 [32mâœ“[39m tests/e2e-detection.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 8375[2mms[22m[39m
     [33m[2mâœ“[22m[39m should compile an image, export/import it, and detect it with high confidence (HDC) [33m 8372[2mms[22m[39m
 [32mâœ“[39m tests/viewer.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 8340[2mms[22m[39m
     [33m[2mâœ“[22m[39m should match a FULL target image (no crop) [33m 8337[2mms[22m[39m
[90mstdout[2m | tests/performance.test.js[2m > [22m[2mCompiler Performance Benchmark[2m > [22m[2mshould compile multiple images in parallel and measure performance
[22m[39m   - Match Result: TargetIndex=0
   âœ… Target FOUND! Match successful.

 [32mâœ“[39m tests/performance.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 9084[2mms[22m[39m
     [33m[2mâœ“[22m[39m should compile multiple images in parallel and measure performance [33m 9079[2mms[22m[39m
[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mOfflineCompiler should import data from exported buffer
[22m[39mâ±ï¸ CompilaciÃ³n total: 3.200s

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mOfflineCompiler should import data from exported buffer
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)
âœ… Imported 1 target(s)
   Target dimensions: 1024x1024

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould be able to combine multiple compiled buffers
[22m[39mðŸ“¦ Testing multi-buffer combination...
âš¡ OfflineCompiler: Main thread mode (no workers)

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould be able to combine multiple compiled buffers
[22m[39mâ±ï¸ CompilaciÃ³n total: 2.391s

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould be able to combine multiple compiled buffers
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould be able to combine multiple compiled buffers
[22m[39mâ±ï¸ CompilaciÃ³n total: 2.223s

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould be able to combine multiple compiled buffers
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)
âœ… Combined 2 targets from 2 buffers

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould validate target indexing with multiple targets
[22m[39mðŸ“¦ Testing target indexing...
âš¡ OfflineCompiler: Main thread mode (no workers)

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould validate target indexing with multiple targets
[22m[39mâ±ï¸ CompilaciÃ³n total: 3.359s

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould validate target indexing with multiple targets
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould validate target indexing with multiple targets
[22m[39mâ±ï¸ CompilaciÃ³n total: 4.153s

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould validate target indexing with multiple targets
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)
âœ… Target 0: 1024x1024
âœ… Target 1: 1024x1024

 [32mâœ“[39m tests/multi-target.test.js [2m([22m[2m4 tests[22m[2m)[22m[33m 24232[2mms[22m[39m
     [33m[2mâœ“[22m[39m should compile the test image to a .taar buffer [33m 7134[2mms[22m[39m
     [33m[2mâœ“[22m[39m OfflineCompiler should import data from exported buffer [33m 3704[2mms[22m[39m
     [33m[2mâœ“[22m[39m should be able to combine multiple compiled buffers [33m 5091[2mms[22m[39m
     [33m[2mâœ“[22m[39m should validate target indexing with multiple targets [33m 8295[2mms[22m[39m

[2m Test Files [22m [1m[32m8 passed[39m[22m[90m (8)[39m
[2m      Tests [22m [1m[32m13 passed[39m[22m[90m (13)[39m
[2m   Start at [22m 17:12:34
[2m   Duration [22m 26.72s[2m (transform 3.22s, setup 0ms, import 12.33s, tests 66.51s, environment 4ms)[22m

