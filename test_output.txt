
> @srsergio/taptapp-ar@1.0.91 test D:\Project\TapTapp\taptapp-ar
> vitest "--run"


[1m[46m RUN [49m[22m [36mv4.0.16 [39m[90mD:/Project/TapTapp/taptapp-ar[39m

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould compile the test image to a .taar buffer
[22m[39mğŸ“¦ Compiling test image to buffer...
âš¡ OfflineCompiler: Main thread mode (no workers)

[90mstdout[2m | tests/tracker-robustness.test.js[2m > [22m[2mTracker Robustness Evaluation (via Controller)
[22m[39mğŸ”¨ Compiling reference target...

[90mstdout[2m | tests/performance.test.js[2m > [22m[2mCompiler Performance Benchmark[2m > [22m[2mshould compile multiple images in parallel and measure performance
[22m[39mğŸš€ Starting Multi-Image Performance Benchmark...
âš¡ OfflineCompiler: Main thread mode (no workers)
ğŸ“¸ Loading test image: D:\Project\TapTapp\taptapp-ar\tests\assets\test-image.png

[90mstdout[2m | tests/generate.test.js[2m > [22m[2mGenerator[2m > [22m[2mshould generate a .taar file in assets
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)
ğŸ“¸ Loading image: D:\Project\TapTapp\taptapp-ar\tests\assets\test-image.png


Progress: 5.00%
Total Progress: 5.00%
Total Progress: 10.00%
Progress: 10.00%
Total Progress: 15.00%
Progress: 15.00%
Total Progress: 20.00%
Progress: 20.00%
Total Progress: 25.00%
Progress: 25.00%
Total Progress: 30.00%
Total Progress: 35.00%
Progress: 30.00%
Total Progress: 40.00%
Total Progress: 45.00%
Total Progress: 50.00%[90mstdout[2m | tests/performance.test.js[2m > [22m[2mCompiler Performance Benchmark[2m > [22m[2mshould compile multiple images in parallel and measure performance
[22m[39mğŸ§ª Compiling 1 image...


Progress: 35.00%
Progress: 40.00%
Progress: 45.00%
Progress: 50.00%[90mstdout[2m | tests/generate.test.js[2m > [22m[2mGenerator[2m > [22m[2mshould generate a .taar file in assets
[22m[39mğŸ§ª Compiling...

[90mstdout[2m | tests/e2e-detection.test.js[2m > [22m[2mEnd-to-End Detection (Protocol V5.1)[2m > [22m[2mshould compile an image, export/import it, and detect it with high confidence
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)
ğŸ”¨ Compiling target...


Total Progress: 75.00%[90mstdout[2m | tests/viewer.test.js[2m > [22m[2mAR Viewer (Controller)[2m > [22m[2mshould match a FULL target image (no crop)
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)


Total Progress: 100.00%[90mstdout[2m | tests/performance.test.js[2m > [22m[2mCompiler Performance Benchmark[2m > [22m[2mshould compile multiple images in parallel and measure performance
[22m[39mâ±ï¸ CompilaciÃ³n total: 6.683s


Progress: 75.00%[90mstdout[2m | tests/tracker-robustness.test.js[2m > [22m[2mTracker Robustness Evaluation (via Controller)
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)

[90mstdout[2m | tests/e2e-detection.test.js[2m > [22m[2mEnd-to-End Detection (Protocol V5.1)[2m > [22m[2mshould compile an image, export/import it, and detect it with high confidence
[22m[39mâ±ï¸ CompilaciÃ³n total: 6.770s

[90mstdout[2m | tests/performance.test.js[2m > [22m[2mCompiler Performance Benchmark[2m > [22m[2mshould compile multiple images in parallel and measure performance
[22m[39m

ğŸ Benchmark Results:
â±ï¸ Total Duration: 6.68s
ğŸ“¦ Exported Size: 0.85 MB (869.03 KB)

âœ… Image 1 Summary:
   - Tracking points: 60
   - Matching Layers (Keyframes):
     Layer 0: Scale=1.0000, Dim=1024x1024, Points=9000 (Max:4986, Min:4014)
     Layer 1: Scale=0.8706, Dim=891x891, Points=9000 (Max:4013, Min:4987)
     Layer 2: Scale=0.5743, Dim=588x588, Points=9000 (Max:3677, Min:5323)
     Layer 3: Scale=0.3789, Dim=388x388, Points=6980 (Max:3257, Min:3723)
     Layer 4: Scale=0.2500, Dim=256x256, Points=3368 (Max:1511, Min:1857)
     Layer 5: Scale=0.1649, Dim=169x169, Points=1634 (Max:727, Min:907)
     Layer 6: Scale=0.1088, Dim=111x111, Points=771 (Max:328, Min:443)
     Layer 7: Scale=0.0718, Dim=74x74, Points=341 (Max:133, Min:208)
     Layer 8: Scale=0.0474, Dim=49x49, Points=138 (Max:46, Min:92)
     Layer 9: Scale=0.0313, Dim=32x32, Points=66 (Max:23, Min:43)

ğŸ” Verifying compiled data with Controller...

[90mstdout[2m | tests/viewer.test.js[2m > [22m[2mAR Viewer (Controller)[2m > [22m[2mshould match a FULL target image (no crop)
[22m[39mâ±ï¸ CompilaciÃ³n total: 6.721s


Progress: 100.00%[90mstdout[2m | tests/generate.test.js[2m > [22m[2mGenerator[2m > [22m[2mshould generate a .taar file in assets
[22m[39mâ±ï¸ CompilaciÃ³n total: 6.934s

[90mstdout[2m | tests/matcher.test.js[2m > [22m[2mMatcher with Columnar Data[2m > [22m[2mshould match features using Matcher class
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)

[90mstdout[2m | tests/generate.test.js[2m > [22m[2mGenerator[2m > [22m[2mshould generate a .taar file in assets
[22m[39m
âœ… Saved to: D:\Project\TapTapp\taptapp-ar\tests\assets\targets.taar (869.03 KB)

 [32mâœ“[39m tests/generate.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 7755[2mms[22m[39m
     [33m[2mâœ“[22m[39m should generate a .taar file in assets [33m 7751[2mms[22m[39m
[90mstdout[2m | tests/tracker-robustness.test.js[2m > [22m[2mTracker Robustness Evaluation (via Controller)
[22m[39mâ±ï¸ CompilaciÃ³n total: 7.286s

[90mstdout[2m | tests/tracker-robustness.test.js[2m > [22m[2mTracker Robustness Evaluation (via Controller)
[22m[39mâœ… Target compiled and ready.

 [31mâ¯[39m tests/tracker-robustness.test.js [2m([22m[2m0 test[22m[2m)[22m[33m 7979[2mms[22m[39m
[90mstdout[2m | tests/matcher.test.js[2m > [22m[2mMatcher with Columnar Data[2m > [22m[2mshould match features using Matcher class
[22m[39mâ±ï¸ CompilaciÃ³n total: 7.582s

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould compile the test image to a .taar buffer
[22m[39mâ±ï¸ CompilaciÃ³n total: 7.321s

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould compile the test image to a .taar buffer
[22m[39mâœ… Buffer created: 889882 bytes

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mOfflineCompiler should import data from exported buffer
[22m[39mğŸ“¦ Testing export/import cycle...
âš¡ OfflineCompiler: Main thread mode (no workers)

[90mstdout[2m | tests/performance.test.js[2m > [22m[2mCompiler Performance Benchmark[2m > [22m[2mshould compile multiple images in parallel and measure performance
[22m[39m   - Detected 5400 features in validation pass.

[90mstdout[2m | tests/accuracy-lsh.test.js[2m > [22m[2mLSH Binarizer Accuracy[2m > [22m[2mshould maintain relative distance (LSH property)
[22m[39mLSH 128 Hamming Dist (Similar): 0
LSH 128 Hamming Dist (Different): 64

 [32mâœ“[39m tests/accuracy-lsh.test.js [2m([22m[2m3 tests[22m[2m)[22m[32m 10[2mms[22m[39m
 [32mâœ“[39m tests/viewer.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 9435[2mms[22m[39m
     [33m[2mâœ“[22m[39m should match a FULL target image (no crop) [33m 9432[2mms[22m[39m
[90mstdout[2m | tests/compiler.test.js[2m > [22m[2mOfflineCompiler[2m > [22m[2mshould compile an image for tracking
[22m[39mğŸš€ Starting OfflineCompiler test with Jimp...
âš¡ OfflineCompiler: Main thread mode (no workers)
ğŸ“¸ Loading image with Jimp: D:\Project\TapTapp\taptapp-ar\tests\assets\test-image.png

[90mstdout[2m | tests/e2e-detection.test.js[2m > [22m[2mEnd-to-End Detection (Protocol V5.1)[2m > [22m[2mshould compile an image, export/import it, and detect it with high confidence
[22m[39mğŸ“‚ Exporting and importing .taar data...
ğŸ” Detecting features in query image...
ğŸ¯ Matching query features against imported target...
MATCH_DL: Hamming found 234 initial matches
âœ… Result: KeyframeIndex=0, Inliers=752

 [32mâœ“[39m tests/e2e-detection.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 9787[2mms[22m[39m
     [33m[2mâœ“[22m[39m should compile an image, export/import it, and detect it with high confidence [33m 9784[2mms[22m[39m
[90mstdout[2m | tests/matcher.test.js[2m > [22m[2mMatcher with Columnar Data[2m > [22m[2mshould match features using Matcher class
[22m[39mMATCH_DL: Hamming found 220 initial matches
MATCH_DL: Hamming found 238 initial matches
Matched keyframe: [33m0[39m
Inliers: [33m784[39m

 [32mâœ“[39m tests/matcher.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 9998[2mms[22m[39m
     [33m[2mâœ“[22m[39m should match features using Matcher class [33m 9995[2mms[22m[39m
[90mstdout[2m | tests/performance.test.js[2m > [22m[2mCompiler Performance Benchmark[2m > [22m[2mshould compile multiple images in parallel and measure performance
[22m[39m   - Match Result: TargetIndex=0
   âœ… Target FOUND! Match successful.

 [32mâœ“[39m tests/performance.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 10121[2mms[22m[39m
     [33m[2mâœ“[22m[39m should compile multiple images in parallel and measure performance [33m 10119[2mms[22m[39m

Compilation progress: 50.00%
Compilation progress: 100.00%[90mstdout[2m | tests/compiler.test.js[2m > [22m[2mOfflineCompiler[2m > [22m[2mshould compile an image for tracking
[22m[39mğŸ–¼ï¸ Loaded image: 1024x1024
ğŸ§ª Running compileTrack...

[90mstdout[2m | tests/compiler.test.js[2m > [22m[2mOfflineCompiler[2m > [22m[2mshould compile an image for tracking
[22m[39m
âœ… Compilation finished in 0.19s
ğŸ“ˆ Extracted 2 feature levels/sets
ğŸ“ Found 60 points in the first level

 [32mâœ“[39m tests/compiler.test.js [2m([22m[2m1 test[22m[2m)[22m[33m 758[2mms[22m[39m
     [33m[2mâœ“[22m[39m should compile an image for tracking [33m 755[2mms[22m[39m
[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mOfflineCompiler should import data from exported buffer
[22m[39mâ±ï¸ CompilaciÃ³n total: 4.243s

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mOfflineCompiler should import data from exported buffer
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)
âœ… Imported 1 target(s)
   Target dimensions: 1024x1024

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould be able to combine multiple compiled buffers
[22m[39mğŸ“¦ Testing multi-buffer combination...
âš¡ OfflineCompiler: Main thread mode (no workers)

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould be able to combine multiple compiled buffers
[22m[39mâ±ï¸ CompilaciÃ³n total: 3.437s

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould be able to combine multiple compiled buffers
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould be able to combine multiple compiled buffers
[22m[39mâ±ï¸ CompilaciÃ³n total: 3.006s

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould be able to combine multiple compiled buffers
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)
âœ… Combined 2 targets from 2 buffers

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould validate target indexing with multiple targets
[22m[39mğŸ“¦ Testing target indexing...
âš¡ OfflineCompiler: Main thread mode (no workers)

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould validate target indexing with multiple targets
[22m[39mâ±ï¸ CompilaciÃ³n total: 2.768s

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould validate target indexing with multiple targets
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould validate target indexing with multiple targets
[22m[39mâ±ï¸ CompilaciÃ³n total: 2.642s

[90mstdout[2m | tests/multi-target.test.js[2m > [22m[2mMulti-Target Support[2m > [22m[2mshould validate target indexing with multiple targets
[22m[39mâš¡ OfflineCompiler: Main thread mode (no workers)
âœ… Target 0: 1024x1024
âœ… Target 1: 1024x1024

 [32mâœ“[39m tests/multi-target.test.js [2m([22m[2m4 tests[22m[2m)[22m[33m 26467[2mms[22m[39m
     [33m[2mâœ“[22m[39m should compile the test image to a .taar buffer [33m 8248[2mms[22m[39m
     [33m[2mâœ“[22m[39m OfflineCompiler should import data from exported buffer [33m 5119[2mms[22m[39m
     [33m[2mâœ“[22m[39m should be able to combine multiple compiled buffers [33m 7115[2mms[22m[39m
     [33m[2mâœ“[22m[39m should validate target indexing with multiple targets [33m 5981[2mms[22m[39m

â¯â¯â¯â¯â¯â¯ Failed Suites 2 â¯â¯â¯â¯â¯â¯â¯

 FAIL  tests/tracker-robustness.test.js [ tests/tracker-robustness.test.js ]
Error: No test found in suite tests/tracker-robustness.test.js
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[1/2]â¯

 FAIL  tests/tracker-robustness.test.js > Tracker Robustness Evaluation (via Controller)
Error: No test found in suite Tracker Robustness Evaluation (via Controller)
â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯â¯[2/2]â¯


[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (9)[39m
[2m      Tests [22m [1m[32m13 passed[39m[22m[90m (13)[39m
[2m   Start at [22m 17:06:26
[2m   Duration [22m 28.42s[2m (transform 2.74s, setup 0ms, import 11.49s, tests 82.31s, environment 3ms)[22m

â€‰ELIFECYCLEâ€‰ Test failed. See above for more details.
