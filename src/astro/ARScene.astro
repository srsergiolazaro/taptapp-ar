---
import type { PropsConfig } from "../react/types";
interface Props {
  config: PropsConfig;
}

const { config } = Astro.props;
---

<a-scene
  mindar-image={`imageTargetSrc: ${config.targetMindSrc};uiLoading: #loading-overlay;uiScanning: #scanning-overlay;uiError: #error-overlay`}
  color-space="sRGB"
  renderer="colorManagement: true, physicallyCorrectLights"
  vr-mode-ui="enabled: false"
  device-orientation-permission-ui="enabled: false"
>
  <a-assets>
    <img id="target-image" crossorigin="anonymous" src={config.targetImageSrc} />
    <video
      id="ar-video"
      src={config.videoSrc}
      preload="auto"
      loop
      autoplay
      playsinline
      webkit-playsinline
      muted
      crossorigin="anonymous"
      class="absolute opacity-0"
      width="1"
      height="1"></video></a-assets
  >
  <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

  <a-entity mindar-image-target="targetIndex: 0">
    <a-video
      id="main-video"
      src="#ar-video"
      position="0 0 0"
      opacity="1"
      width={(config.videoWidth / config.videoHeight) * config.scale}
      height={1 * config.scale}
      rotation="0 0 0"
      visible="true"
      play-on-click
      autoplay></a-video>
  </a-entity>
</a-scene>

<style>
  video {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
  }
</style>
